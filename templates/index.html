<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timetable Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f5f5f5;
            padding-top: 2rem;
            padding-bottom: 2rem;
        }
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .card-header {
            background-color: #3f51b5;
            color: white;
            font-weight: bold;
            border-radius: 10px 10px 0 0 !important;
        }
        .btn-primary {
            background-color: #3f51b5;
            border-color: #3f51b5;
        }
        .btn-primary:hover {
            background-color: #303f9f;
            border-color: #303f9f;
        }
        .btn-outline-primary {
            color: #3f51b5;
            border-color: #3f51b5;
        }
        .btn-outline-primary:hover {
            background-color: #3f51b5;
            color: white;
        }
        .form-range::-webkit-slider-thumb {
            background: #3f51b5;
        }
        .form-range::-moz-range-thumb {
            background: #3f51b5;
        }
        .logo {
            max-height: 60px;
            margin-bottom: 15px;
        }
        .alert {
            border-radius: 8px;
        }
        .config-card {
            transition: transform 0.3s;
        }
        .config-card:hover {
            transform: translateY(-5px);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="text-center mb-4">
                    <h1 class="display-4">Timetable Generator</h1>
                    <p class="lead">Generate optimized timetables for classes with genetic algorithm</p>
                </div>

                {% if error %}
                <div class="alert alert-danger" role="alert">
                    {{ error }}
                </div>
                {% endif %}

                <!-- Configuration Card -->
                <div class="card mb-4 config-card">
                    <div class="card-header">
                        Configure Subjects
                    </div>
                    <div class="card-body">
                        <p class="mb-3">Before generating a timetable, you can customize how many periods each subject should be taught:</p>
                        <div class="d-grid">
                            <a href="{{ url_for('configure_periods') }}" class="btn btn-outline-primary btn-lg">
                                <i class="bi bi-gear-fill me-2"></i>Configure Subject Periods
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Generator Settings Card -->
                <div class="card">
                    <div class="card-header">
                        Generator Settings
                    </div>
                    <div class="card-body">
                        <form action="{{ url_for('generate') }}" method="post">
                            <div class="mb-3">
                                <label for="population_size" class="form-label">Population Size: <span id="population_size_value">10</span></label>
                                <input type="range" class="form-range" min="5" max="50" step="5" id="population_size" name="population_size" value="10" oninput="updateValue('population_size')">
                                <small class="text-muted">Larger population can improve results but takes longer to generate</small>
                            </div>

                            <div class="mb-3">
                                <label for="generations" class="form-label">Generations: <span id="generations_value">100</span></label>
                                <input type="range" class="form-range" min="50" max="500" step="50" id="generations" name="generations" value="100" oninput="updateValue('generations')">
                                <small class="text-muted">More generations can lead to better optimization</small>
                            </div>

                            <div class="mb-3">
                                <label for="mutation_rate" class="form-label">Mutation Rate: <span id="mutation_rate_value">0.1</span></label>
                                <input type="range" class="form-range" min="0.05" max="0.5" step="0.05" id="mutation_rate" name="mutation_rate" value="0.1" oninput="updateValue('mutation_rate')">
                                <small class="text-muted">Higher values increase randomness in solutions</small>
                            </div>

                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary btn-lg">Generate Timetable</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card mt-4">
                    <div class="card-header">
                        About Timetable Generator
                    </div>
                    <div class="card-body">
                        <p>This application generates optimized class timetables using a genetic algorithm approach. The system:</p>
                        <ul>
                            <li>Creates schedules for Monday to Friday with 7 periods per day (3 before lunch, 4 after)</li>
                            <li>Automatically pulls subject and teacher data from the connected database</li>
                            <li>Optimizes schedules based on teaching load constraints</li>
                            <li>Ensures teachers aren't scheduled in multiple classes simultaneously</li>
                            <li>Tries to arrange consecutive periods for the same subject when possible</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function updateValue(id) {
            const input = document.getElementById(id);
            const output = document.getElementById(id + '_value');
            output.textContent = input.value;
        }
    </script>
</body>
</html>